From 48fb96d502908489e216c16fd9d3597e81c49b31 Mon Sep 17 00:00:00 2001
From: csagan5 <32685696+csagan5@users.noreply.github.com>
Date: Wed, 14 Feb 2018 12:56:01 +0100
Subject: [PATCH 014/107] Never fetch popular sites

---
 components/ntp_tiles/popular_sites_impl.cc | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

diff --git a/components/ntp_tiles/popular_sites_impl.cc b/components/ntp_tiles/popular_sites_impl.cc
index 256e6f1618..9482cf812c 100644
--- a/components/ntp_tiles/popular_sites_impl.cc
+++ b/components/ntp_tiles/popular_sites_impl.cc
@@ -61,7 +61,6 @@ const char kPopularSitesDefaultDirectory[] = "chrome/ntp/";
 const char kPopularSitesDefaultCountryCode[] = "DEFAULT";
 const char kPopularSitesDefaultVersion[] = "5";
 const int kSitesExplorationStartVersion = 6;
-const int kPopularSitesRedownloadIntervalHours = 24;
 
 GURL GetPopularSitesURL(const std::string& directory,
                         const std::string& country,
@@ -280,7 +279,12 @@ bool PopularSitesImpl::MaybeStartFetch(bool force_download,
   DCHECK(!callback_);
   callback_ = std::move(callback);
 
-  const base::Time last_download_time = base::Time::FromInternalValue(
+  if (force_download) {
+    std::move(callback_).Run(true);
+    return true;
+  }
+
+/*  const base::Time last_download_time = base::Time::FromInternalValue(
       prefs_->GetInt64(prefs::kPopularSitesLastDownloadPref));
   const base::TimeDelta time_since_last_download =
       base::Time::Now() - last_download_time;
@@ -297,7 +301,7 @@ bool PopularSitesImpl::MaybeStartFetch(bool force_download,
       (time_since_last_download > redownload_interval) || url_changed) {
     FetchPopularSites();
     return true;
-  }
+  }*/
   return false;
 }
 
-- 
2.35.1

