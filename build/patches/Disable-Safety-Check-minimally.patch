From: Tommy Webb <tommy@calyxinstitute.org>
Date: Wed, 8 Mar 2023 12:22:58 -0500
Subject: Disable Safety Check minimally

Remove Safety Check from Settings and the omnibox, but in case it is
accessed through some other unknown means, ensure that method for
performing it (called when clicking the button) does nothing.

Change-Id: Ieaa019e878f2cd39a01393d2bcf8425d70f8f02e
---
 .../src/org/chromium/chrome/browser/settings/MainSettings.java | 2 +-
 .../chrome/browser/safety_check/SafetyCheckMediator.java       | 1 +
 chrome/browser/ui/omnibox/omnibox_pedal_implementations.cc     | 3 ---
 3 files changed, 2 insertions(+), 4 deletions(-)

diff --git a/chrome/android/java/src/org/chromium/chrome/browser/settings/MainSettings.java b/chrome/android/java/src/org/chromium/chrome/browser/settings/MainSettings.java
--- a/chrome/android/java/src/org/chromium/chrome/browser/settings/MainSettings.java
+++ b/chrome/android/java/src/org/chromium/chrome/browser/settings/MainSettings.java
@@ -249,7 +249,7 @@ public class MainSettings extends ChromeBaseSettingsFragment
                                     .removePreference(findPreference(PREF_TOOLBAR_SHORTCUT));
                         });
 
-        if (BuildInfo.getInstance().isAutomotive) {
+        if ((true) || BuildInfo.getInstance().isAutomotive) {
             getPreferenceScreen().removePreference(findPreference(PREF_SAFETY_CHECK));
             getPreferenceScreen().removePreference(findPreference(PREF_SAFETY_HUB));
         } else if (!ChromeFeatureList.sSafetyHub.isEnabled()) {
diff --git a/chrome/browser/safety_check/android/java/src/org/chromium/chrome/browser/safety_check/SafetyCheckMediator.java b/chrome/browser/safety_check/android/java/src/org/chromium/chrome/browser/safety_check/SafetyCheckMediator.java
--- a/chrome/browser/safety_check/android/java/src/org/chromium/chrome/browser/safety_check/SafetyCheckMediator.java
+++ b/chrome/browser/safety_check/android/java/src/org/chromium/chrome/browser/safety_check/SafetyCheckMediator.java
@@ -399,6 +399,7 @@ class SafetyCheckMediator {
 
     /** Triggers all safety check child checks. */
     public void performSafetyCheck() {
+        if (true) return;
         // Cancel pending delayed show callbacks if a new check is starting while any existing
         // elements are pending.
         mHandler.removeCallbacksAndMessages(null);
diff --git a/chrome/browser/ui/omnibox/omnibox_pedal_implementations.cc b/chrome/browser/ui/omnibox/omnibox_pedal_implementations.cc
--- a/chrome/browser/ui/omnibox/omnibox_pedal_implementations.cc
+++ b/chrome/browser/ui/omnibox/omnibox_pedal_implementations.cc
@@ -2014,9 +2014,6 @@ GetPedalImplementations(bool incognito, bool guest, bool testing) {
   add(new OmniboxPedalManagePasswords());
   add(new OmniboxPedalUpdateCreditCard());
   add(new OmniboxPedalLaunchIncognito());
-  if (!base::android::BuildInfo::GetInstance()->is_automotive()) {
-    add(new OmniboxPedalRunChromeSafetyCheck());
-  }
   add(new OmniboxPedalPlayChromeDinoGame());
   add(new OmniboxPedalManageSiteSettings());
   add(new OmniboxPedalManageChromeSettings());
-- 

