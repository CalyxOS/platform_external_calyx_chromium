From: uazo <uazo@users.noreply.github.com>
Date: Tue, 14 Feb 2023 16:23:08 +0000
Subject: Evict the entire FrameTree like desktop

License: GPL-2.0-or-later - https://spdx.org/licenses/GPL-2.0-or-later.html
Change-Id: Icd9f7e30b88d212024d15ca4a254c9acce1ad505
---
 components/viz/common/features.cc                               | 2 +-
 .../features_cc/Evict-the-entire-FrameTree-like-desktop.inc     | 1 +
 2 files changed, 2 insertions(+), 1 deletion(-)
 create mode 100644 cromite_flags/content/common/features_cc/Evict-the-entire-FrameTree-like-desktop.inc

diff --git a/components/viz/common/features.cc b/components/viz/common/features.cc
--- a/components/viz/common/features.cc
+++ b/components/viz/common/features.cc
@@ -248,7 +248,7 @@ BASE_FEATURE(kRendererAllocatesImages,
 // evicts itself. This differs from Destkop platforms which evict the entire
 // FrameTree along with the topmost viz::Surface. When this feature is enabled,
 // Android will begin also evicting the entire FrameTree.
-BASE_FEATURE(kEvictSubtree, "EvictSubtree", base::FEATURE_ENABLED_BY_DEFAULT);
+BASE_FEATURE(kEvictSubtree, "EvictSubtree", base::FEATURE_ENABLED_BY_DEFAULT); // enabled by default
 
 // If enabled, CompositorFrameSinkClient::OnBeginFrame is also treated as the
 // DidReceiveCompositorFrameAck. Both in providing the Ack for the previous
diff --git a/cromite_flags/content/common/features_cc/Evict-the-entire-FrameTree-like-desktop.inc b/cromite_flags/content/common/features_cc/Evict-the-entire-FrameTree-like-desktop.inc
new file mode 100644
index 0000000000000000000000000000000000000000..ba3c46d718c68769c9596053071bf90cdd1d903e
--- /dev/null
+++ b/cromite_flags/content/common/features_cc/Evict-the-entire-FrameTree-like-desktop.inc
@@ -0,0 +1 @@
+SET_CROMITE_FEATURE_ENABLED(kInnerFrameCompositorSurfaceEviction);
-- 

