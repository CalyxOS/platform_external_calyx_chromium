From: Zoraver Kang <zkang@wpi.edu>
Date: Mon, 26 Aug 2019 17:54:28 -0400
Subject: disable AdsBlockedInfoBar

License: GPL-3.0-only - https://spdx.org/licenses/GPL-3.0-only.html

Change-Id: I19d41c9f8aa5e0c066cc2816463a7702374b2e27
---
 .../browser/profile_interaction_manager.cc    | 35 -------------------
 1 file changed, 35 deletions(-)

diff --git a/components/subresource_filter/content/browser/profile_interaction_manager.cc b/components/subresource_filter/content/browser/profile_interaction_manager.cc
--- a/components/subresource_filter/content/browser/profile_interaction_manager.cc
+++ b/components/subresource_filter/content/browser/profile_interaction_manager.cc
@@ -22,9 +22,6 @@
 #include "content/public/browser/web_contents.h"
 
 #if BUILDFLAG(IS_ANDROID)
-#include "components/messages/android/message_dispatcher_bridge.h"
-#endif
-
 namespace subresource_filter {
 
 ProfileInteractionManager::ProfileInteractionManager(
@@ -133,38 +130,6 @@ void ProfileInteractionManager::MaybeShowNotification() {
   // currently primary.
   CHECK(page_, base::NotFatalUntil::M129);
   CHECK(page_->IsPrimary(), base::NotFatalUntil::M129);
-
-  const GURL& top_level_url = page_->GetMainDocument().GetLastCommittedURL();
-  if (profile_context_->settings_manager()->ShouldShowUIForSite(
-          top_level_url)) {
-#if BUILDFLAG(IS_ANDROID)
-    if (messages::MessageDispatcherBridge::Get()
-            ->IsMessagesEnabledForEmbedder()) {
-      subresource_filter::AdsBlockedMessageDelegate::CreateForWebContents(
-          GetWebContents());
-      ads_blocked_message_delegate_ =
-          subresource_filter::AdsBlockedMessageDelegate::FromWebContents(
-              GetWebContents());
-      ads_blocked_message_delegate_->ShowMessage();
-    }
-#endif
-
-    // TODO(crbug.com/40139135): Plumb the actual frame reference here
-    // (it comes from
-    // ContentSubresourceFilterThrottleManager::DidDisallowFirstSubresource,
-    // which comes from a specific frame).
-    content_settings::PageSpecificContentSettings* content_settings =
-        content_settings::PageSpecificContentSettings::GetForFrame(
-            &page_->GetMainDocument());
-    content_settings->OnContentBlocked(ContentSettingsType::ADS);
-
-    ContentSubresourceFilterThrottleManager::LogAction(
-        SubresourceFilterAction::kUIShown);
-    profile_context_->settings_manager()->OnDidShowUI(top_level_url);
-  } else {
-    ContentSubresourceFilterThrottleManager::LogAction(
-        SubresourceFilterAction::kUISuppressed);
-  }
 }
 
 content_settings::CookieSettings*
-- 

