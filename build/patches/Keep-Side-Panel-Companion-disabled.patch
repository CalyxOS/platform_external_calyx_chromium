From: uazo <uazo@users.noreply.github.com>
Date: Mon, 17 Jul 2023 15:24:16 +0000
Subject: Keep Side Panel Companion disabled

License: GPL-2.0-or-later - https://spdx.org/licenses/GPL-2.0-or-later.html

Change-Id: I1ac17290f58079af0488cc772095c8af94ee8a20
---
 chrome/browser/ui/side_search/side_search_prefs.cc              | 2 +-
 components/search_engines/template_url.cc                       | 2 +-
 .../ui/ui_features_cc/Keep-Side-Panel-Companion-disabled.inc    | 1 +
 3 files changed, 3 insertions(+), 2 deletions(-)
 create mode 100755 cromite_flags/chrome/browser/ui/ui_features_cc/Keep-Side-Panel-Companion-disabled.inc

diff --git a/chrome/browser/ui/side_search/side_search_prefs.cc b/chrome/browser/ui/side_search/side_search_prefs.cc
--- a/chrome/browser/ui/side_search/side_search_prefs.cc
+++ b/chrome/browser/ui/side_search/side_search_prefs.cc
@@ -14,7 +14,7 @@ namespace side_search_prefs {
 const char kSideSearchEnabled[] = "side_search.enabled";
 
 void RegisterProfilePrefs(user_prefs::PrefRegistrySyncable* registry) {
-  registry->RegisterBooleanPref(kSideSearchEnabled, true);
+  registry->RegisterBooleanPref(kSideSearchEnabled, false);
 }
 
 }  // namespace side_search_prefs
diff --git a/components/search_engines/template_url.cc b/components/search_engines/template_url.cc
--- a/components/search_engines/template_url.cc
+++ b/components/search_engines/template_url.cc
@@ -2020,7 +2020,7 @@ const TemplateURLData::RegulatoryExtension* TemplateURL::GetRegulatoryExtension(
 }
 
 bool TemplateURL::IsSideSearchSupported() const {
-  return !side_search_param().empty();
+  return false;
 }
 
 bool TemplateURL::IsSideImageSearchSupported() const {
diff --git a/cromite_flags/chrome/browser/ui/ui_features_cc/Keep-Side-Panel-Companion-disabled.inc b/cromite_flags/chrome/browser/ui/ui_features_cc/Keep-Side-Panel-Companion-disabled.inc
new file mode 100755
--- /dev/null
+++ b/cromite_flags/chrome/browser/ui/ui_features_cc/Keep-Side-Panel-Companion-disabled.inc
@@ -0,0 +1 @@
+SET_CROMITE_FEATURE_DISABLED(kSideSearch);
-- 

