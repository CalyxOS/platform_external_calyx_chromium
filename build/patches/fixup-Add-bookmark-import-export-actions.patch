From: Tommy Webb <tommy@calyxinstitute.org>
Date: Tue, 12 Nov 2024 22:41:24 +0000
Subject: fixup! Add bookmark import/export actions

Change-Id: Id26804377a4754f28556feef67771ff1fbe01605
---
 chrome/browser/bookmarks/android/bookmark_bridge.cc | 7 +------
 chrome/browser/bookmarks/bookmark_html_writer.cc    | 8 --------
 2 files changed, 1 insertion(+), 14 deletions(-)

diff --git a/chrome/browser/bookmarks/android/bookmark_bridge.cc b/chrome/browser/bookmarks/android/bookmark_bridge.cc
--- a/chrome/browser/bookmarks/android/bookmark_bridge.cc
+++ b/chrome/browser/bookmarks/android/bookmark_bridge.cc
@@ -965,12 +965,7 @@ void BookmarkBridge::FileSelected(const ui::SelectedFileInfo& file, int index) {
 }
 
 const std::string BookmarkBridge::FileSelectedImpl(const base::FilePath& path) {
-  base::File file;
-  if (path.IsContentUri()) {
-    file = base::OpenContentUri(path, base::File::FLAG_OPEN | base::File::FLAG_READ);
-  } else {
-    file.Initialize(path, base::File::FLAG_OPEN | base::File::FLAG_READ);
-  }
+  base::File file(path, base::File::FLAG_OPEN | base::File::FLAG_READ);
   if (!file.IsValid()) {
     select_file_dialog_->ShowToast("Cannot open bookmarks file for import");
     return "";
diff --git a/chrome/browser/bookmarks/bookmark_html_writer.cc b/chrome/browser/bookmarks/bookmark_html_writer.cc
--- a/chrome/browser/bookmarks/bookmark_html_writer.cc
+++ b/chrome/browser/bookmarks/bookmark_html_writer.cc
@@ -243,15 +243,7 @@ class Writer : public base::RefCountedThreadSafe<Writer> {
   // Opens the file, returning true on success.
   bool OpenFile() {
     int flags = base::File::FLAG_CREATE_ALWAYS | base::File::FLAG_WRITE;
-#if BUILDFLAG(IS_ANDROID)
-    if (path_.IsContentUri()) {
-      file_ = std::make_unique<base::File>(base::OpenContentUriForWrite(path_));
-    } else {
-      file_ = std::make_unique<base::File>(path_, flags);
-    }
-#else
     file_ = std::make_unique<base::File>(path_, flags);
-#endif
     if (!file_->IsValid()) {
       PLOG(ERROR) << "Could not create " << path_;
       return false;
-- 

