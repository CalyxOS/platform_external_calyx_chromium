From: Tommy Webb <tommy@calyxinstitute.org>
Date: Tue, 1 Jul 2025 16:24:38 +0000
Subject: Fix build without ntp_tiles metrics

Change-Id: Id2c5b8a095a1f35a55ec9e10091f1c7daea6c136
---
 components/ntp_tiles/custom_links_store.cc | 9 ---------
 1 file changed, 9 deletions(-)

diff --git a/components/ntp_tiles/custom_links_store.cc b/components/ntp_tiles/custom_links_store.cc
--- a/components/ntp_tiles/custom_links_store.cc
+++ b/components/ntp_tiles/custom_links_store.cc
@@ -11,7 +11,6 @@
 #include <utility>
 
 #include "base/strings/utf_string_conversions.h"
-#include "components/ntp_tiles/metrics.h"
 #include "components/ntp_tiles/pref_names.h"
 #include "components/pref_registry/pref_registry_syncable.h"
 #include "components/prefs/pref_service.h"
@@ -33,8 +32,6 @@ CustomLinksStore::CustomLinksStore(PrefService* prefs) : prefs_(prefs) {
 CustomLinksStore::~CustomLinksStore() = default;
 
 std::vector<CustomLinksManager::Link> CustomLinksStore::RetrieveLinks() {
-  static bool has_recorded_first_load_stats = false;
-
   std::vector<CustomLinksManager::Link> links;
 
   const base::Value::List& stored_links =
@@ -61,12 +58,6 @@ std::vector<CustomLinksManager::Link> CustomLinksStore::RetrieveLinks() {
         std::move(url), base::UTF8ToUTF16(*title_string), is_most_visited});
   }
 
-  if (!has_recorded_first_load_stats) {
-    has_recorded_first_load_stats = true;
-    ntp_tiles::metrics::RecordNumberOfCustomTilesOnFirstNtp(
-        static_cast<int>(links.size()));
-  }
-
   return links;
 }
 
-- 

